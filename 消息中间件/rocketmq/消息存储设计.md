- 生成消息，可以有多个`producer`，消息写入到`commitLog`，需要对`commitLog`进行加锁，写入成功后响应`producer`
  - `commitLog`需要存储一条消息需要什么格式？
  - `commitLog`只要一个文件，还是要多个文件？
  - 如果是多个`commitLog`，如何根据`offset`找到消息的元数据？
  - 是不是每个`commitLog`文件都要映射到内存？
- 后台线程，主要负责将新加入到`commitLog`的消息分配到`comsumer_queue`
  - 通过`readOffset`记录读取的位置，当退出程序时，需要持久化到磁盘
  - 根据`message.topic`投递到不同的topic
  - 要根据什么规则投递到不同的`comsumer_queue`?
  - `tag`是用来过滤消息，那么一个`comsumer_queue`是不是都是相同`tag`的消息?
  - 如果不是相同的`tag`的消息，是不是排前面的非tag没被读取，后面的`tag`消息就会一直不会被消息?
  - `comuser_queue`如何记录消费进度？  
- 消费消息
  - 规定一个`comsumer`只能消费一个 
  - 确认消费消息，是客户端定时上报消费偏移量，如果服务端挂掉，没有收到ack，然后又恢复过来，这个时候是客户端继续上报ack先呢？还是客户端继续重复从服务端拉取消息呢？
  - 每次拉取消息的数量是多少呢，是不是客户端维护一个队列，然后不停的向服务端拉消息保存在自己的队列，直到满为止呢？
  - 如果客户端上报ack失败后，要做什么处理呢？超时不处理还是一直不断的尝试去上报？
  - 有两种消费模式，一种是集群消费，进度需要保存在服务端，一种是广播消费，进度可以保存在本地，可是问题如果本地客户端挂掉之后，另一个消费连上了队列，那么是不是意味着要重新再消费一遍队列内所有消息？
  - 
- 索引文件
  - `comsumer_queue`没有用到索引文件`indexFile`，那主要是用在哪里？

